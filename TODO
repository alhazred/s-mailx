TODO reminder.
Before you start making additions to (Heirloom mailx and) S-nail,
subscribe to the development mailing list at
<https://lists.sourceforge.net/lists/listinfo/nail-devel>
to coordinate your efforts with the maintainer and other people.

Backward-compatibility breakers
-------------------------------

- Is anybody actually using the NSS code?  Does this still apply?
  Check and verify -- or remove it!
  [Note: due to lack of personal interest...  Please complain.]
- Recipients specified on the command line should be added to those
  specified in the message when the -t option is set.
- The -q option makes me sad as it doesn't use *indentprefix* for the
  quoted file.  So either there should be -Q which does so, or -q should be
  changed.  Also see ~R below.
  [Note: i think i go for the latter.  Please complain.]
- NetBSD mailx(1) removes all recipients in up Cc: and To: that are also
  specified in Bcc.  At least configurable.
  [Note: i plan to make this default.  Please complain.]
- At least optionally disallow silent discarding of invalid addresses,
  i.e., cause sending to be aborted if not all recipient addresses pass the
  validity test.
  And shouldn't it generally be marked as an error and reported when the
  program exits?  At least in non-interactive mode??  Yet there is no
  indication that anything has happened at all!
  [Note: i plan to report error in non-interactive mode.  Please complain.]
- POSIX says that, when written to DEAD: "If the file exists, the message
  shall be written to replace the contents of the file".  This is mentioned
  for ASYNCHRONOUS EVENTS, but it's the only description of what should be
  done in which way to DEAD.  savedeadletter() yet appends.
- Furthermore, *all* file operations yet append, even recipient target
  files are appended.  I don't know if this is really desirable behaviour,
  but i have not thought about that for real.  Maybe this should be at
  least configurable.

Non-breakers
------------

- [v13:started] Reformat the manual.
  roff style is fine, but lines should be ~70 characters, not only ~25.
- IDNA.
- Mail-Followup-To:.
- I want to have a ~R tilde command that works like ~r except it performs
  quoting of the input just as ~m does.  Also see -q above.
- Offer the possibility to work with certificate fingerprints instead of
  full certificates, in equal spirit to the current maintainers S-Postman
  and Mercurial.  S-nail(1) could simply offer something in equal spirit to
  the formers --fingerprint, so that no other tool is necessary for
  certificate management (for secure transport at least).
- Think about a name bypass hashmap cache, and whenever we have to skin or
  nalloc() or whatever, look in there.  Maybe even an additional link for
  non GFULL(/GSKIN) and fully skinned struct name objects.
  The amount of duplicated work in this codebase if frustrating, but the
  real healing would make necessary a complete rewrite of the name handling!
  Such a cache would work without touching the current code flow ... or
  allow a smooth transition to a new one anyway.
- Deal with faulty message selection that may occur when selecting threads
  via & (when at least mixed with other selectors).
- Try to add command line editing; problems may be signals and even
  more longjmp()s, and how they are used at the moment.  Check that.
- Add the possibility to simply place whatever header in the editor (and
  in the mail read in due to the -t command line option, and...).
- Check against RFC 5322.
  Really recheck all the header parsing code.
- What about RFC 6531?
- Check against newest POSIX.
- Maybe add a bash(1)ish POSIXLY_CORRECT (or so) switch that can be used to
  disallow extensions (e.g. specification of "full" addresses on command
  line).
- Maybe there should be an additional ZOMBIE directive that is served in
  equal spirit to DEAD, but that could be a valid MBOX... ?
  What i want is a *real* resend, best if possible from command line.
- mime.c:prefixwrite() tracks state internally instead of having a cookie
  argument.  That doesn't really make sense.  Either it is capable to work
  with multiple files concurrently and prefix-quotes them correctly in the
  same fashion, or it doesn't track anything at all.  It even tracked those
  calls that do not write a prefix at all before, just to make this
  mechanism work ... Or not?  Well, if you track the last file and if there
  was a newline last, and you switch files, then the last newline state is
  lost, and you do write the prefix even if in the other file there was no
  newline last.  I'm confused now.  Change this, please.

- Revise the code:
  + Add C99-likeish typedefs for integers and use them everywhere.
  + Don't use magic constants/values.
  + Document the functions in the interface declarators.
  + Try to thin out the onion and reduce work that is done over and over
    again.  Maybe introduce objects to represent header[field/body] and
    content and find a way to pass those all through that vegetable.
  + The current codebase assumes that in multibyte encodings plains ASCII
    characters can be tested "as-is".  This assumption is wrong for some
    encodings that use U+001B (escape) or another ASCII thing to introduce
    shift states.  The only real solution to this problem would be to
    rewrite the entire codebase and use wide characters (IMO) everywhere.
  + [v13:started] Resort the functions and where they are implemented.
    It's really terrible.  Just think about outof(), savedeadletter(),
    savemail() etc..
- The current maintainer doesn't like longjmp()s.
- The current maintainer doesn't like signals.
- The current maintainer would like to see that compilation with a C++
  compiler is possible, though that would be a long way and be especially
  problematic due to the (C ish) way enums are used.  He never understood
  why there is not "bitenum", btw.
- The current maintainer worked with all-tabs for almost one and a half
  decade and turned over to all-spaces afterwards.

vim:set fenc=utf-8 syntax=txt ts=8 sts=2 sw=2 et tw=75:
