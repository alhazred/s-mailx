I n s t a l l i n g  S - n a i l
================================

Quick start
-----------

Read user.conf and maybe adjust some feature settings according to your
needs.  You may also want to look into the Makefile, e.g., to change the
PREFIX, or to adjust whatever else before the >8 scissor line -- all of
those can however also be specified on the command line, as shown below.
Then run:

  $ [make &&] make install # ("make install" alone is also sufficient)
  $ make uninstall         # (Will not remove the example configuration)
  $ make distclean         # *Completely* cleanup working directory

If some libraries are missing that you know are installed on your
system, or if other errors occur due to missing files but which you know
exist, please ensure that the environment variable C_INCLUDE_PATH
includes the necessary include/ paths and the environment variable
LD_LIBRARY_PATH includes the necessary lib/rary paths.

The S-nail make system will inspect these two environment variables and
*automatically* convert them to cc(1) (c99(1)) -I and -L options (since
these environment variables are, different to the command line options,
not part of the POSIX standard).

The S-nail make system will also automatically integrate pkgsrc(7) paths
into this mechanism.  pkgsrc is used to handle building (compiling),
installing and removing of software packages on a lot of operating
systems, including all BSD systems, Linux, Solaris ...

To set these environment variables, the following can be done in
a Bourne/Korn/POSIX compatible shell:

  $ C_INCLUDE_PATH=${C_INCLUDE_PATH}:/usr/local/include
  $ LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib
  $ export C_INCLUDE_PATH LD_LIBRARY_PATH
  $ make install

Instead of actually *editing* the Makefile it is probably much easier to
override variables on the command line instead, e.g., to change the
installation directory:

  $ make PREFIX=/some/nasty/prefix install

And instead of editing user.conf you may also choose predefined CONFIG
sets from the command line:

  CONFIG=MINIMAL  little is left but some air to breathe.
  CONFIG=NETLESS  all settings from user.conf relating internet connect-
                  ivity are off.
  CONFIG=NETSEND  WANT_SMTP and WANT_SSL settings are enabled, otherwise
                  identical to MINIMAL.
  CONFIG=CUSTOM   don't touch anything, i.e., enable all features.
                  To disable specific features, add FEATURE=0 command
                  line arguments when running make [install].

When this CONFIG-set approach is used, the following additional switches
may be used on the command line (in fact any single entry of user.conf
may be given on the command line, the actually chosen CONFIG may however
overwrite some of the settings again, except CONFIG=CUSTOM by definition):

  WANT_IDNA=0     Do not (try to) support internationalized domain names.
  WANT_DOCSTRINGS=0
                  Don't include command synopsis strings for "help".

E.g.:

  $ make CONFIG=MINIMAL WANT_IDNA=0 DESTDIR=xtest SID=mini- install

would create a "mini-nail" binary and install a "mini-nail" manual etc.
under the prefix /usr/local but rooted under [./]xtest, i.e., the binary
would be installed as "[./]xtest/usr/local/bin/mini-nail".  Note that
for "make uninstall" the *exact* command line should be repeated.

Notes for S-nail(1) v14.*
-------------------------

S-nail(1) was developed and tested under Mac OS X Snow Leopard (clang(1)
and gcc(1)) as well as NetBSD 6.0 (gcc(1)).
S-nail(1) is known to correctly execute the ./cc-test.sh shell script,
with and without uncommented compiler WARN= flags, on the following
operating systems:

- NetBSD 6.0.
  Note that you should not enable -fstrict-overflow (yet).
- DragonFly BSD v3.2.1.9-g80b03f-RELEASE.
  (*All* optional dependencies turn to green on this one!)
- FreeBSD 9.0.
  Tested with CC=clang(1) and CC=gcc(1), -O2, and the WARNs including
  -fstrict-overflow.
- UnixWare 7.1.4.
  (The -v compiler option gives some harmless warnings.)
- OpenBSD 5.2.
- TinyCoreLinux 4.4 with gcc 4.6.1.

Program features yet to be overhauled
-------------------------------------

Since i've forked Heirloom mailx(1) (for real) as S-nail(1) on
2012-09-18 i make my way through the codebase, but have not yet taken
a look (rather: at all) into the following modules/parts:

  IPv6, List view/threading, SSL, IMAP+, POP3+, SMTP+, Bayesian filter

These will remain features of S-nail(1) and they will be looked at, and
of course i will fix bugs when i notice them, but they are not yet part
of the overhauled "S-nail core" (though SMTP is in daily use).
You may also want to have a look at the file TODO.
